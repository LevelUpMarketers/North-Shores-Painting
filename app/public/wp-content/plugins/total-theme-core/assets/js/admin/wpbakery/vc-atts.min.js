_.isUndefined(window.vc)&&(window.vc={atts:{}}),function(t){"use strict";const e=t=>{const e=t[0];e.addEventListener("click",(n=>{const i=n.target.closest(".vcex-opt");if(i){e.querySelectorAll(".vcex-opt").forEach((t=>{t.classList.remove("vcex-active")})),i.classList.add("vcex-active");t.find(".wpb_vc_param_value").val(i.getAttribute("data-value")).trigger("change"),n.preventDefault()}}))},n=e=>{var n=[],i=null,c=!0;return e.each((function(e,a){var r=t(this),s=r.val();if(0===e&&(i=s),i!==s&&(c=!1),s){var o=r.attr("name")||r.attr("data-vcex-device");o=o+":"+s,n.push(o)}})),c||1===n.length?i:n.join("|")},i=e=>{if(void 0!==t.fn.chosen){const t=e.find(".vcex-chosen");t.length&&t.chosen({search_contains:!0,inherit_select_classes:!0})}};document.addEventListener("click",(t=>{if(!t.target.closest(".vcex-create-template-link"))return;const e=t.target.closest(".vc_description"),n=e.querySelector("[data-vcex-refresh-choices]"),i=n.closest(".hidden");i&&i.classList.remove("hidden"),n.addEventListener("click",(t=>{t.preventDefault();const i=e.closest(".edit_form_line").querySelector(".vcex_select");i.style.opacity=".5";const c=new URLSearchParams({action:"vcex_params",task:"refresh_choices",choices:n.getAttribute("data-vcex-refresh-choices"),nonce:n.getAttribute("data-vcex-nonce")});fetch(window.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:c.toString()}).then((t=>{if(!t.ok)throw i.style.opacity="",new Error("Network response was not ok: "+t.statusText);return t.json()})).then((t=>{i.innerHTML="",i.value="",t.forEach((t=>{const e=document.createElement("option"),n=Object.keys(t)[0];e.value=n,e.textContent=t[n],i.appendChild(e)})),i.style.opacity=""})).catch((t=>{console.error("Error:",t)}))}))})),vc.atts.vcex_font_family_select={init:function(t,e){i(e)}},vc.atts.vcex_select={init:function(t,e){i(e)}},vc.atts.vcex_select_buttons={init:function(t,n){e(n)}},vc.atts.vcex_select_icon={init:function(t,e){const n=e.find(".totaltheme-icon-select__input");n[0].addEventListener("change",(t=>{n.trigger("change")}))}},vc.atts.vcex_colorpicker={init:function(t,e){"function"==typeof window.totalthemeRenderComponents&&totalthemeRenderComponents(e[0]);const n=e.find(".totaltheme-component-color__hidden-input");n[0].addEventListener("change",(t=>{n.trigger("change")}))}},vc.atts.vcex_text_align={init:function(t,n){e(n)}},vc.atts.vcex_responsive_sizes={init:function(t,e){var i=e.find(".vcex-param-responsive-fields__item input"),c=e.find(".wpb_vc_param_value");i.on("keyup",(function(t){c.val(n(i)).trigger("change")}))}},vc.atts.vcex_custom_field={init:function(t,e){const n=e.find(".vcex-param-custom-field__input"),i=e.find(".vcex-param-custom-field__select");i.on("change",(function(t){const e=i.val(),c=e?"hidden":"text";n.attr("type",c),n.val(e).trigger("change")}))}},vc.atts.vcex_font_size={init:function(e,i){const c=i.find(".vcex-param-font-size"),a=i.find(".wpb_vc_param_value");if(!c.length)return void i.find(".vc_description a").on("click",(function(){return a.val(t(this).text()).trigger("change"),!1}));const r=i.find(".vcex-param-font-size__item input"),s=i.find(".vcex-param-font-size__toggle"),o=i.find(".vc_description a");let v;r.on("keyup",(function(t){"true"===s.attr("aria-pressed")?a.val(n(r)).trigger("change"):a.val(r.first().val()).trigger("change")})),r.on("focus",(function(){v=t(this)})),s.click((function(){return"true"===s.attr("aria-pressed")?(s.attr("aria-pressed","false"),c.addClass("vcex-param-font-size--single"),a.val(r.first().val()).trigger("change")):(s.attr("aria-pressed","true"),c.removeClass("vcex-param-font-size--single"),a.val(n(r)).trigger("change")),!1})),o&&(document.addEventListener("click",(function(t){t.target.closest(".vcex-param-font-size__item input")||(v=null)})),o.on("click",(function(){return(v||r.first()).val(t(this).text()),a.val(n(r)).trigger("change"),!1})))}},vc.atts.vcex_multiselect={parse:function(e){var n,i;return n=[],i="",t("input[name="+e.param_name+"]",this.content()).each((function(){var e;e=t(this),this.checked&&n.push(e.attr("value"))})),0<n.length&&(i=n.join(",")),i}},vc.atts.vcex_trbl={init:function(e,n){const i=n.find(".vcex-param-trbl__item input"),c=n.find(".wpb_vc_param_value");i.on("keyup",(function(e){const n=[];let a=null,r=!0;i.each((function(e,i){const c=t(this),s=c.val();0===e&&(a=s),a!==s&&(r=!1),s&&n.push(c.attr("data-vcex-position")+":"+s)})),r?c.val(a).trigger("change"):c.val(n.join("|")).trigger("change")}))}},vc.atts.vcex_preset_textfield={init:function(e,i){var c=i.find(".vcex-param-preset-textfield__preset"),a=i.find(".vcex-param-preset-textfield__custom"),r=c.find(".vcex-param-preset-textfield__select"),s=a.find(".vcex-param-preset-textfield__input"),o=i.find(".wpb_vc_param_value"),v=i.find(".vcex-param-preset-textfield__toggle"),l=v.attr("aria-pressed"),u=i.find(".vc_description");"true"!==l&&u.hide(),v.click((function(){return"true"===v.attr("aria-pressed")?(v.attr("aria-pressed","false"),c.show(),r.focus().trigger("change"),a.hide(),u.hide()):(v.attr("aria-pressed","true"),c.hide(),a.show(),a.find("input").first().focus().trigger("change"),u.show()),!1}));const f=i.find(".vcex-param-responsive-fields__item input");f.length&&f.on("keyup",(function(){s.val(n(f)).trigger("change")}));const d=function(e){o.val(t(e.target).val()).trigger("change")};r.on("change",d),s.on("keyup",d)}},vc.atts.vcex_min_max={init:function(e,n){var i=n.find(".vcex-param-min-max__item input"),c=n.find("input.wpb_vc_param_value");i.on("input",(function(){var e=[];i.each((function(n,i){var c=t(this).val();c&&e.push(parseInt(c)+"px")})),1===e.length?c.val(""):c.val(e.join("|"))}))}},vc.atts.vcex_media_select={init:function(t,e){let n="";const i=e.find(".wpb_vc_param_value"),c=e.find(".vcex-param-media-select"),a=c.find(".vcex-param-media-select__button"),r=c.attr("data-media-type"),s=c.attr("data-return-val");a.click((function(t){t.preventDefault(),n?n.open():n=wp.media({library:{type:r},multiple:!1,autoSelect:!0}).on("select",(function(t){const e=n.state().get("selection").first().toJSON()[s];i.val(e).trigger("change")})).open()}))}},vc.atts.vcex_ofswitch={init:function(e,n){n.on("click",".vcex-ofswitch .vcex-btn",(function(){const e=t(this).parent(".vcex-ofswitch"),n=e.find(".vcex-hidden-input");e.find(".vcex-btn").removeClass("vcex-active"),t(this).addClass("vcex-active"),n.val(t(this).data("value")).trigger("change")}))}},vc.atts.vcex_number={init:function(e,n){n.find(".vcex-number-param").change((function(){const e=t(this).val();if(e){const n=parseInt(t(this).attr("min")),i=parseInt(t(this).attr("max"));n&&i&&e&&(e>i?t(this).val(i):e<n&&t(this).val(n))}}))}},vc.atts.vcex_grid_columns_responsive={init:function(e,n){n.find(".vcex-responsive-column-select").on("change",(function(e){const n=[],i=t(this).closest(".vcex-responsive-columns-param"),c=i.find("select"),a=i.find("input.wpb_vc_param_value");c.each((function(e,i){const c=t(this).val();c&&n.push(`${t(this).attr("name")}:${c}`)})),n.length?a.val(n.join("|")).trigger("change"):a.val("").trigger("change")}))}},vc.atts.vcex_sorter={init:function(e,n){if(void 0===t.fn.sortable)return void console.error("vcex_sorter param error: sortable func is not defined");const i=e=>{const n=[];e.find("li").each((function(){t(this).hasClass("vcex-disabled")||n.push(t(this).attr("data-value"))})),t(e).next("input.wpb_vc_param_value").val(n).trigger("change")};n.find(".vcex-sorter-param").each((function(){const e=t(this);e.sortable(),e.disableSelection(),e.on("sortstop",(function(t,n){i(e)})),e.find("li > a").click((function(){return t(this).find(".ticon").toggleClass("ticon-rotate-180"),t(this).parents("li:eq(0)").toggleClass("vcex-disabled"),i(e),!1}))}))}}}(jQuery);